// Generated by CoffeeScript 2.5.1
// # Miscellaneous kerberos functions
var krb5;

module.exports = krb5 = {
  kinit: function(config) {
    var cmd;
    cmd = "kinit";
    if (config.keytab === true) {
      " -k";
    } else if (config.keytab && typeof config.keytab === 'string') {
      cmd += ` -kt ${config.keytab}`;
    } else if (config.password) {
      cmd = `echo ${config.password} | ${cmd}`;
    } else {
      throw Error("Incoherent config: expects one of keytab or password");
    }
    cmd += ` ${config.principal}`;
    return cmd = krb5.su(config, cmd);
  },
  su: function(config, cmd) {
    if (config.uid) {
      cmd = `su - ${config.uid} -c '${cmd}'`;
    }
    return cmd;
  }
};
